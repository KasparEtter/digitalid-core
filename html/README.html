<html>
<head>
<title>Digital ID Reference Implementation</title>
<link href="style.css" media="all" rel="stylesheet">
<style>
html body {
	margin: 60px;
	padding-top: 0px;
}
h5 {
	font-size: 15px;
	margin-top: 20px;
}
</style>
</head>
<body>
<div class='wiki'>
<h1 id="digital-id-reference-implementation">Digital ID Reference Implementation<a href="#digital-id-reference-implementation"></a></h1><h2 id="contents">Contents<a href="#contents"></a></h2>&#x000A;<p><strong><a href="#abstract">Abstract</a></strong></p>&#x000A;&#x000A;<p><strong><a href="#bundles">Bundles</a></strong></p>&#x000A;&#x000A;<p><strong><a href="#usage">Usage</a></strong></p>&#x000A;&#x000A;<ul>&#x000A;<li><a href="#server">Server</a>&#x000A;&#x000A;<ul>&#x000A;<li><a href="#requirements">Requirements</a></li>&#x000A;<li><a href="#setup">Setup</a></li>&#x000A;</ul></li>&#x000A;<li><a href="#library">Library</a>&#x000A;&#x000A;<ul>&#x000A;<li><a href="#classpath-setup">Classpath Setup</a></li>&#x000A;<li><a href="#role-creation">Role Creation</a></li>&#x000A;<li><a href="#concept-retrieval">Concept Retrieval</a></li>&#x000A;<li><a href="#attribute-caching">Attribute Caching</a></li>&#x000A;<li><a href="#block-wrapping">Block Wrapping</a></li>&#x000A;<li><a href="#event-listening">Event Listening</a></li>&#x000A;<li><a href="#database-locking">Database Locking</a></li>&#x000A;<li><a href="#other-annotations">Other Annotations</a></li>&#x000A;</ul></li>&#x000A;</ul>&#x000A;&#x000A;<p><strong><a href="#overview">Overview</a></strong></p>&#x000A;&#x000A;<ul>&#x000A;<li><a href="#concepts">Concepts</a>&#x000A;&#x000A;<ul>&#x000A;<li><a href="#digital-identities">Digital Identities</a></li>&#x000A;<li><a href="#attributes-and-certificates">Attributes and Certificates</a></li>&#x000A;<li><a href="#contacts-and-contexts">Contacts and Contexts</a></li>&#x000A;<li><a href="#clients-and-roles">Clients and Roles</a></li>&#x000A;</ul></li>&#x000A;<li><a href="#protocol">Protocol</a>&#x000A;&#x000A;<ul>&#x000A;<li><a href="#architecture">Architecture</a></li>&#x000A;<li><a href="#cryptography">Cryptography</a></li>&#x000A;<li><a href="#synchronization">Synchronization</a></li>&#x000A;</ul></li>&#x000A;<li><a href="#services">Services</a></li>&#x000A;</ul>&#x000A;&#x000A;<p><strong><a href="#documentation">Documentation</a></strong></p>&#x000A;&#x000A;<p><strong><a href="#roadmap">Roadmap</a></strong></p>&#x000A;&#x000A;<p><strong><a href="#authors">Authors</a></strong></p>&#x000A;&#x000A;<p><strong><a href="#contact">Contact</a></strong></p>&#x000A;&#x000A;<p><strong><a href="#license">License</a></strong></p>&#x000A;<h2 id="abstract">Abstract<a href="#abstract"></a></h2>&#x000A;<p>Digital ID is a protocol that constitutes an identity layer for the Internet and a semantic alternative to the World Wide Web. It allows you to prove your identity towards others and to look up attributes of others in a decentralized manner. Being freely extensible with services, Digital ID aims to supersede proprietary platforms by establishing a framework of open standards.</p>&#x000A;<h2 id="bundles">Bundles<a href="#bundles"></a></h2>&#x000A;<p>The reference implementation is available for <a href="https://www.digitalid.net/downloads/">download</a> in three different bundles:</p>&#x000A;&#x000A;<ul>&#x000A;<li><strong><a href="https://www.digitalid.net/downloads/DigitalID.jar">DigitalID.jar</a></strong> (1 MB): Contains only the class files of the core protocol. The libraries have to be provided separately.</li>&#x000A;<li><strong><a href="https://www.digitalid.net/downloads/DigitalID-Server.jar">DigitalID-Server.jar</a></strong> (7 MB): Includes all the libraries that are required to run the implementation as a server. (Besides non-null annotations and custom taglets, this bundle contains the <a href="http://www.mysql.com">MySQL</a>, <a href="http://www.postgresql.org">PostgreSQL</a> and <a href="http://www.sqlite.org">SQLite</a> <a href="http://www.oracle.com/technetwork/java/overview-141217.html">JDBC</a> drivers.)</li>&#x000A;<li><strong><a href="https://www.digitalid.net/downloads/DigitalID-Client.jar">DigitalID-Client.jar</a></strong> (5 MB): Includes all the libraries that are required for the development of applications. (This bundle contains non-null annotations, custom taglets and the <a href="http://www.sqlite.org">SQLite</a> <a href="http://www.oracle.com/technetwork/java/overview-141217.html">JDBC</a> driver.)</li>&#x000A;</ul>&#x000A;<h2 id="usage">Usage<a href="#usage"></a></h2>&#x000A;<p>The Digital ID reference implementation can either directly be run as a server or be used as a library to write services and client applications.</p>&#x000A;<h3 id="server">Server<a href="#server"></a></h3><h4 id="requirements">Requirements<a href="#requirements"></a></h4><h5 id="java-runtime">Java Runtime<a href="#java-runtime"></a></h5>&#x000A;<p>The reference implementation requires the <a href="http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1880261.html">Java SE Runtime Environment 7</a> or <a href="http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html">newer</a>. You can check your current version (and whether you even have Java) with <code>java -version</code> on the command line interface of your operating system. (Please note that the version numbering of Java is decimal. All you need is a version of 1.7 or higher.)</p>&#x000A;<h5 id="domain-name">Domain Name<a href="#domain-name"></a></h5>&#x000A;<p>In order to set up a host on your server, you need to have a registered domain and configure a subdomain with the name 'id' (e.g. id.example.com) that references your server (either as an 'A' or 'CNAME' <a href="https://en.wikipedia.org/wiki/List_of_DNS_record_types">record</a>). Please note that the address of a host in Digital ID does <strong>not</strong> contain this subdomain (i.e. it is only example.com). The subdomain is only used internally for resolving host addresses but never presented to the user.</p>&#x000A;<h5 id="port-number">Port Number<a href="#port-number"></a></h5>&#x000A;<p>The server should be reachable on the <a href="https://en.wikipedia.org/wiki/Port_(computer_networking)">port number</a> 1988. Make sure that no firewall or router blocks the access and add corresponding exceptions or <a href="https://en.wikipedia.org/wiki/Port_forwarding">forwarding rules</a> otherwise.</p>&#x000A;<h5 id="database">Database<a href="#database"></a></h5>&#x000A;<p>It is highly recommended that you use MySQL as the database on the server due to its superior locking capabilities.&#x000A;Additionally, PostgreSQL is not yet supported in the current version because of locking issues.</p>&#x000A;<h4 id="setup">Setup<a href="#setup"></a></h4><h5 id="startup">Startup<a href="#startup"></a></h5>&#x000A;<p>The server can be started from the <a href="https://en.wikipedia.org/wiki/Command-line_interface">command line</a> with <code>java -jar DigitalID-Server.jar</code>, if you are in the right <a href="https://en.wikipedia.org/wiki/Working_directory">working directory</a>. If you start the server for the first time, you need to configure the database (see the last paragraph for recommendations).</p>&#x000A;<h5 id="handling">Handling<a href="#handling"></a></h5>&#x000A;<p>Once the server has started up, you enter an infinite loop that looks like this:</p>&#x000A;<pre class="code highlight white plaintext"><code>You have the following options:&#x000A;–  0: Exit the server.&#x000A;–  1: Show the version.&#x000A;–  2: Show the hosts.&#x000A;–  3: Create a host.&#x000A;–  4: Export a host.&#x000A;–  5: Import a host.&#x000A;–  6: Show the services.&#x000A;–  7: Reload the services.&#x000A;–  8: Activate a service.&#x000A;–  9: Deactivate a service.&#x000A;– 10: Change a provider.&#x000A;– 11: Generate tokens.&#x000A;– 12: Show members.&#x000A;– 13: Add members.&#x000A;– 14: Remove members.&#x000A;– 15: Open a host.&#x000A;– 16: Close a host.&#x000A;&#x000A;Execute the option: _&#x000A;</code></pre>&#x000A;&#x000A;<p>You can now choose the option 3 to create the host. Please enter your domain name without the subdomain 'id' (i.e. only example.com). (Please note that it can take several minutes to generate the cryptographic keys during the creation of a host.)</p>&#x000A;<h5 id="folders">Folders<a href="#folders"></a></h5>&#x000A;<p>All Digital ID-related files are stored in an invisible folder in the user's home directory with the name <code>~/.DigitalID</code>. This directory has the following subfolders:</p>&#x000A;&#x000A;<ul>&#x000A;<li><strong>Hosts</strong>: Contains the public and private keys of all the hosts that run on this server. (The keys of the just created host should now be listed in this directory.)</li>&#x000A;<li><strong>Clients</strong>: Contains the client secrets of all the clients on this account. (Secrets that begin with an underscore belong to the client of the corresponding host.)</li>&#x000A;<li><strong>Services</strong>: Contains the implementations of additional services as <a href="https://en.wikipedia.org/wiki/JAR_(file_format)">JAR files</a>.</li>&#x000A;<li><strong>Data</strong>: Contains the database configuration of the server (and also the database files if clients are run with SQLite).</li>&#x000A;<li><strong>Logs</strong>: Contains the log files of various server (and also client) modules.</li>&#x000A;</ul>&#x000A;<h5 id="certification">Certification<a href="#certification"></a></h5>&#x000A;<p>Before clients can connect to your host, you need to have its public key certified by <a href="http://www.pd.coop">Patria Digitalis</a>. Please note that this process is not supported yet.</p>&#x000A;<h5 id="deinstallation">Deinstallation<a href="#deinstallation"></a></h5>&#x000A;<p>All you have to do to deinstall Digital ID, is to delete the folder <code>~/.DigitalID</code>, drop the database and delete <code>DigitalID-Server.jar</code>.</p>&#x000A;<h3 id="library">Library<a href="#library"></a></h3><h4 id="classpath-setup">Classpath Setup<a href="#classpath-setup"></a></h4>&#x000A;<p>In order to use the Digital ID reference implementation as a library, download <a href="https://www.digitalid.net/downloads/DigitalID-Client.jar">DigitalID-Client.jar</a> and add it to the classpath of your favorite <a href="https://en.wikipedia.org/wiki/Integrated_development_environment">IDE</a>.</p>&#x000A;<h4 id="role-creation">Role Creation<a href="#role-creation"></a></h4>&#x000A;<p>All the actions and queries are performed on <a href="#clients-and-roles">roles</a>. It is easy to create a new <a href="#digital-identities">identity</a> and get the so-called native role for it:</p>&#x000A;<pre class="code highlight white java"><code><span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Client</span><span class="o">(</span><span class="s">"client_identifier"</span><span class="o">,</span> <span class="s">"Client Name"</span><span class="o">,</span> <span class="n">Image</span><span class="o">.</span><span class="na">CLIENT</span><span class="o">,</span> <span class="n">AgentPermissions</span><span class="o">.</span><span class="na">GENERAL_WRITE</span><span class="o">);</span>&#x000A;<span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">InternalNonHostIdentifier</span> <span class="n">identifier</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InternalNonHostIdentifier</span><span class="o">(</span><span class="s">"user@example.com"</span><span class="o">);</span>&#x000A;<span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">NativeRole</span> <span class="n">role</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">openAccount</span><span class="o">(</span><span class="n">identifier</span><span class="o">,</span> <span class="n">Category</span><span class="o">.</span><span class="na">NATURAL_PERSON</span><span class="o">);</span>&#x000A;</code></pre>&#x000A;&#x000A;<p>Instead of creating a new identity, you can also request accreditation for an existing identity:</p>&#x000A;<pre class="code highlight white java"><code><span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Client</span><span class="o">(</span><span class="s">"client_identifier"</span><span class="o">,</span> <span class="s">"Client Name"</span><span class="o">,</span> <span class="n">Image</span><span class="o">.</span><span class="na">CLIENT</span><span class="o">,</span> <span class="n">AgentPermissions</span><span class="o">.</span><span class="na">GENERAL_WRITE</span><span class="o">);</span>&#x000A;<span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">InternalNonHostIdentifier</span> <span class="n">identifier</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InternalNonHostIdentifier</span><span class="o">(</span><span class="s">"user@example.com"</span><span class="o">);</span>&#x000A;<span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">InternalNonHostIdentity</span> <span class="n">identity</span> <span class="o">=</span> <span class="n">identifier</span><span class="o">.</span><span class="na">getIdentity</span><span class="o">();</span>&#x000A;<span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">NativeRole</span> <span class="n">role</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">accredit</span><span class="o">(</span><span class="n">identity</span><span class="o">,</span> <span class="s">"password"</span><span class="o">);</span>&#x000A;</code></pre>&#x000A;<h4 id="concept-retrieval">Concept Retrieval<a href="#concept-retrieval"></a></h4>&#x000A;<p>Once you have such a role, it is easy to retrieve a <a href="#concepts">concept</a> of that role like an <a href="#attributes-and-certificates">attribute</a> or a <a href="#contacts-and-contexts">context</a>:</p>&#x000A;<pre class="code highlight white java"><code><span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">Attribute</span> <span class="n">attribute</span> <span class="o">=</span> <span class="n">Attribute</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">role</span><span class="o">,</span> <span class="n">AttributeType</span><span class="o">.</span><span class="na">NAME</span><span class="o">);</span>&#x000A;<span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">getRoot</span><span class="o">(</span><span class="n">role</span><span class="o">);</span> <span class="c1">// Subcontexts are not yet supported.</span>&#x000A;</code></pre>&#x000A;<h4 id="attribute-caching">Attribute Caching<a href="#attribute-caching"></a></h4>&#x000A;<p>The <a href="#attributes-and-certificates">attributes</a> of other <a href="#digital-identities">identities</a> are cached locally and can be retrieved as follows:</p>&#x000A;<pre class="code highlight white java"><code><span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">InternalNonHostIdentifier</span> <span class="n">identifier</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InternalNonHostIdentifier</span><span class="o">(</span><span class="s">"friend@example.com"</span><span class="o">);</span>&#x000A;<span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">Block</span> <span class="n">block</span> <span class="o">=</span> <span class="n">Cache</span><span class="o">.</span><span class="na">getFreshAttributeContent</span><span class="o">(</span><span class="n">identifier</span><span class="o">.</span><span class="na">getIdentity</span><span class="o">(),</span> <span class="n">role</span><span class="o">,</span> <span class="n">AttributeType</span><span class="o">.</span><span class="na">NAME</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>&#x000A;</code></pre>&#x000A;<h4 id="block-wrapping">Block Wrapping<a href="#block-wrapping"></a></h4>&#x000A;<p>Digital ID uses an own encoding which is called the Extensible Data Format (XDF). Values are wrapped into blocks and can be unwrapped as follows:</p>&#x000A;<pre class="code highlight white java"><code><span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">String</span> <span class="n">string</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringWrapper</span><span class="o">(</span><span class="n">block</span><span class="o">).</span><span class="na">getString</span><span class="o">();</span> <span class="c1">// Decoding</span>&#x000A;<span class="kd">final</span> <span class="nd">@Nonnull</span> <span class="n">Block</span> <span class="n">block</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringWrapper</span><span class="o">(</span><span class="n">AttributeType</span><span class="o">.</span><span class="na">NAME</span><span class="o">,</span> <span class="n">string</span><span class="o">).</span><span class="na">toBlock</span><span class="o">();</span> <span class="c1">// Encoding</span>&#x000A;</code></pre>&#x000A;&#x000A;<p>Please note that the syntax might change in a <a href="#roadmap">future release</a>.</p>&#x000A;<h4 id="event-listening">Event Listening<a href="#event-listening"></a></h4>&#x000A;<p>Currently, you can observe <a href="#concepts">concepts</a> for certain aspects and be notified when a value changes:</p>&#x000A;<pre class="code highlight white java"><code><span class="n">attribute</span><span class="o">.</span><span class="na">observe</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">Attribute</span><span class="o">.</span><span class="na">VALUE</span><span class="o">,</span> <span class="n">Attribute</span><span class="o">.</span><span class="na">VISIBILITY</span><span class="o">,</span> <span class="n">Attribute</span><span class="o">.</span><span class="na">RESET</span><span class="o">);</span> <span class="c1">// Adding this object as a listener</span>&#x000A;<span class="n">attribute</span><span class="o">.</span><span class="na">unobserve</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">Attribute</span><span class="o">.</span><span class="na">VALUE</span><span class="o">,</span> <span class="n">Attribute</span><span class="o">.</span><span class="na">VISIBILITY</span><span class="o">,</span> <span class="n">Attribute</span><span class="o">.</span><span class="na">RESET</span><span class="o">);</span> <span class="c1">// Removing this object as a listener</span>&#x000A;</code></pre>&#x000A;&#x000A;<p>In order for this to work, the class of this object needs to implement the Observer interface as follows:</p>&#x000A;<pre class="code highlight white java"><code><span class="kd">class</span> <span class="nc">Example</span> <span class="kd">implements</span> <span class="n">Observer</span> <span class="o">{</span>&#x000A;    <span class="nd">@Override</span>&#x000A;    <span class="kd">public</span> <span class="kt">void</span> <span class="n">notify</span><span class="o">(</span><span class="nd">@Nonnull</span> <span class="n">Aspect</span> <span class="n">aspect</span><span class="o">,</span> <span class="nd">@Nonnull</span> <span class="n">Instance</span> <span class="n">instance</span><span class="o">)</span> <span class="o">{</span>&#x000A;        <span class="k">if</span> <span class="o">(</span><span class="n">aspect</span> <span class="o">==</span> <span class="n">Attribute</span><span class="o">.</span><span class="na">VALUE</span> <span class="o">||</span> <span class="n">aspect</span> <span class="o">==</span> <span class="n">Attribute</span><span class="o">.</span><span class="na">RESET</span><span class="o">)</span> <span class="o">{</span>&#x000A;            <span class="c1">// Do with the instance whose value changed or was reset whatever you want here.</span>&#x000A;        <span class="o">}</span>&#x000A;    <span class="o">}</span>&#x000A;<span class="o">}</span>&#x000A;</code></pre>&#x000A;&#x000A;<p>However, this mechanism will be replaced by a <a href="http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm">JavaFX-like</a> property paradigm in a <a href="#roadmap">future release</a>.</p>&#x000A;<h4 id="database-locking">Database Locking<a href="#database-locking"></a></h4>&#x000A;<p>As the <a href="#synchronization">synchronization</a> of actions is handled concurrently by separate threads and the locking of SQLite is very primitive, it needs to be done in the client code. Make sure that you <strong>always</strong> acquire the lock before accessing the database as follows:</p>&#x000A;<pre class="code highlight white java"><code><span class="k">try</span> <span class="o">{</span>&#x000A;    <span class="n">Database</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>&#x000A;    <span class="c1">// Access the database.</span>&#x000A;    <span class="n">Database</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>&#x000A;<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nd">@Nonnull</span> <span class="n">SQLException</span> <span class="n">exception</span><span class="o">)</span> <span class="o">{</span>&#x000A;    <span class="c1">// Handle the error here.</span>&#x000A;    <span class="n">Database</span><span class="o">.</span><span class="na">rollback</span><span class="o">();</span>&#x000A;<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>&#x000A;    <span class="n">Database</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>&#x000A;<span class="o">}</span>&#x000A;</code></pre>&#x000A;&#x000A;<p>Whether the database is accessed by a method or its called methods is indicated by the annotations <code>@Committing</code> and <code>@NonCommitting</code>. As their names suggest, they also declare whether the current transaction is committed by the method or not, which might not be desirable if the whole transaction should be rolled back on failure. Moreover, a method that is declared to be <code>@Committing</code> guarantees that the transaction is in a committed (or rolled back) state when the method is left without throwing an exception. If the last method in the try-block is committing, then the explicit commit at its end can be omitted.</p>&#x000A;&#x000A;<p>Furthermore, methods usually indicate whether they expect the database to be locked already (with <code>@Locked</code>) or whether this may not be the case in order to prevent deadlocks (with <code>@NonLocked</code>). In all other cases (i.e. where the method is <code>@Committing</code> or <code>@NonCommitting</code> but does not require a certain locking state), the method handles the locking itself. (Please note that the lock is re-entrant for the thread that currently holds it so it does not matter whether the lock is already held or not.)</p>&#x000A;<h4 id="other-annotations">Other Annotations<a href="#other-annotations"></a></h4>&#x000A;<p>You find dozens more annotations in the package <code>net.digitalid.core.annotations</code>, which should largely be self-explanatory with their corresponding <a href="#documentation">documentation</a>. A design pattern that is used so extensively throughout the code so that it is worth to be mentioned here is <code>Freezable</code>. Objects that implement this interface can be changed until you <code>freeze()</code> them. From that point onwards they are immutable and can be shared among objects and threads without running into consistency problems. As you would expect by now, there are annotations to indicate whether the object denoted by a variable or parameter is <code>@Frozen</code> or <code>@NonFrozen</code>. Independent of their freezing state, such objects can be exposed through a <code>Readonly</code> interface (that only includes the methods that are <code>@Pure</code>).</p>&#x000A;<h4 id="code-debugging">Code Debugging<a href="#code-debugging"></a></h4>&#x000A;<p>The reference implementation loosely follows the <a href="https://en.wikipedia.org/wiki/Design_by_contract">design by contract</a> methodology. You can have the contracts checked by enabling assertions with <code>java -enableassertions -jar DigitalID-Client.jar ...</code> or <code>java -ea -jar DigitalID-Client.jar ...</code> for short, which is highly recommended during debugging.</p>&#x000A;<h2 id="overview">Overview<a href="#overview"></a></h2>&#x000A;<p>The following sections give you a short overview of the most important concepts and principles of Digital ID.</p>&#x000A;<h3 id="concepts">Concepts<a href="#concepts"></a></h3><h4 id="digital-identities">Digital Identities<a href="#digital-identities"></a></h4>&#x000A;<p>Users – natural and artificial persons alike – choose a trusted server to host their digital identity. Every digital identity has a globally dereferenceable identifier that consists of a user name and the host address, which are combined by an '@' like email addresses (e.g. <a href="mailto:user@example.com">user@example.com</a>). The host stores for each digital identity its <a href="#attributes-and-certificates">attributes and certificates</a>, <a href="#contacts-and-contexts">contacts and contexts</a>, and <a href="#clients-and-roles">clients and roles</a>.</p>&#x000A;<h4 id="attributes-and-certificates">Attributes and Certificates<a href="#attributes-and-certificates"></a></h4>&#x000A;<p>Attributes are name-value pairs that are associated with a digital identity. Each attribute has an access policy that determines its visibility towards other digital identities. The attribute type specifies the format and the semantics of the given value but also the attribute-specific caching period. Authorities can confirm the correctness of an attribute by issuing a certificate. This does not only increase the credibility of the attribute, but certificates can also be used for attribute-based access control in the form of <a href="#cryptography">credentials</a>.</p>&#x000A;<h4 id="contacts-and-contexts">Contacts and Contexts<a href="#contacts-and-contexts"></a></h4>&#x000A;<p>Contacts are references to other digital identities and can be handled efficiently by means of hierarchical contexts. The contact relation is asymmetric and private (i.e. the other person is not notified unless this is desired). Contexts can be used to address several contacts at once but also to simplify access control for resources like attributes. You also specify on a context-level how requests to its contacts should be authenticated (i.e. whether to sign it with your identity, one or several attribute credentials or not at all).</p>&#x000A;<h4 id="clients-and-roles">Clients and Roles<a href="#clients-and-roles"></a></h4>&#x000A;<p>Being just a protocol without a user interface, Digital ID can only be accessed by <a href="#architecture">clients</a>. You accredit clients to manage your identity and to assume your identity towards other identities. Their authorization can be restricted regarding the contexts and attributes that they can read and request from contacts. You can also authorize other digital identities to act in a similarly restricted role on your behalf, which is especially useful in case of artificial persons.</p>&#x000A;<h3 id="protocol">Protocol<a href="#protocol"></a></h3><h4 id="architecture">Architecture<a href="#architecture"></a></h4>&#x000A;<p>The architecture of Digital ID is quite similar to email, it also follows a decentralized <a href="https://en.wikipedia.org/wiki/Client%E2%80%93server_model">client-server model</a>. The same server can accommodate several hosts, each being denoted by a different <a href="#domain-name">domain name</a>. The recipient of a request is always a host, which returns a response to the requester before the <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol">TCP</a> connection is being closed.</p>&#x000A;<h4 id="cryptography">Cryptography<a href="#cryptography"></a></h4>&#x000A;<p>Every host has a public key that has to be certified. <a href="http://www.pd.coop">Patria Digitalis</a> is responsible for the administration of this public key infrastructure. Hosts sign certificates and responses with 1536-bit <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)">RSA</a> (this value will be increased to 2048-bit before public deployment). All communication is encrypted with 192-bit <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES</a>, whereby the AES symmetric key is encrypted with the RSA public key of the host. Clients commit to their 256-bit secret and sign the requests to the host at which they are accredited using the <a href="https://en.wikipedia.org/wiki/Schnorr_signature">Schnorr scheme</a>. A client can request an <a href="https://en.wikipedia.org/wiki/Digital_credential#Anonymous">anonymous credential</a> from its host based on the <a href="https://eprint.iacr.org/2001/019.pdf">Camenisch-Lysyanskaya system</a>, which can be used for unlinkable authentication.</p>&#x000A;<h4 id="synchronization">Synchronization<a href="#synchronization"></a></h4>&#x000A;<p>Each client has to make sure that it stays in synchronization with the state of the digital identity for which it is accredited. In order to retrieve the current <em>state</em>, it sends a <em>query</em> to its host and gets a <em>reply</em> in return. Afterwards, the <em>state</em> is modified through <em>actions</em>, which are <em>audited</em> by the host. A client can then request the audit of all actions since its last contact with the host and execute those on the local state as well. As clients can be <a href="#clients-and-roles">restricted</a>, the host returns only the actions whose effects are visible for the client, of course.</p>&#x000A;<h3 id="services">Services<a href="#services"></a></h3>&#x000A;<p>In its essence, Digital ID is just a distributed address book that functions as a lookup layer for clients. (Think of it as a Domain Name System for personal information.) Anyone can extend Digital ID by specifying new attribute types that link to independent services. A host that provides such a service can be fully integrated into the system by being accredited as a client at the user’s digital identity. The functionality of Digital ID’s core is deliberately kept to a minimum, since – unlike other services – it can no longer be replaced later on.</p>&#x000A;<h2 id="documentation">Documentation<a href="#documentation"></a></h2>&#x000A;<p>You find the <a href="http://en.wikipedia.org/wiki/Javadoc">Javadoc</a> of all public classes and methods at <a href="http://www.digitalid.net/documentation/">www.digitalid.net/documentation/</a>.</p>&#x000A;<h2 id="roadmap">Roadmap<a href="#roadmap"></a></h2>&#x000A;<p>The current version of the Digital ID reference implementation is 0.6. The following features are planned for future releases:</p>&#x000A;&#x000A;<ul>&#x000A;<li><strong>0.7</strong>: Make the library more consistent and easy to use. Implement a uniform mechanism to change and observe properties of concepts, which includes modifications to the database modules. Improve the error handling and logging.</li>&#x000A;<li><strong>0.8</strong>: Implement the action pusher (which is required for access requests and role issuances) and the certification module (so that the public keys of other hosts can be certified). Also support the shortening of credentials.</li>&#x000A;<li><strong>0.9</strong>: Implement the contacts and contexts modules, including their authentications and permissions. Support context-based access requests and role issuances, including an own database module to handle the read receipts.</li>&#x000A;<li><strong>1.0</strong>: Implement the tokens, errors and members modules. Implement the remaining console options. Do extensive integration testing of various features like relocation, merging, exporting and importing of hosts, etc.</li>&#x000A;</ul>&#x000A;<h2 id="authors">Authors<a href="#authors"></a></h2>&#x000A;<p>The reference implementation was written by:</p>&#x000A;&#x000A;<ul>&#x000A;<li>Kaspar Etter (<a href="mailto:kaspar.etter@digitalid.net">kaspar.etter@digitalid.net</a>)</li>&#x000A;</ul>&#x000A;<h2 id="contact">Contact<a href="#contact"></a></h2>&#x000A;<p>Do not hesitate to contact us at:</p>&#x000A;&#x000A;<ul>&#x000A;<li>Information: <a href="mailto:info@digitalid.net">info@digitalid.net</a></li>&#x000A;<li>Support: <a href="mailto:help@digitalid.net">help@digitalid.net</a></li>&#x000A;</ul>&#x000A;<h2 id="license">License<a href="#license"></a></h2>&#x000A;<p>All rights reserved. The code will be published under an open-source/commercial double-license later on.</p>
</div>
</body>